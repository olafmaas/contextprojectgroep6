<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Player</title>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="js/socket.io.min.js"></script> 
        <script src="js/player.js"></script>
        
        <script src="../game/highResolutionTimer.js"></script>
        <script src="../game/IdDistributor.js"></script>
        <script src="../game/Base.js"></script>
        <script src="../game/Player.js"></script>
        <script src="../game/Timer.js"></script>
        <script src="../game/Game.js"></script>
        <script src="../game/Sprite.js"></script>
        <script src="../game/Ball.js"></script>
        <script src="../game/Body.js"></script>
        <script src="../game/CircularBody.js"></script>
        <script src="../game/ShieldBody.js"></script>       
        <script src="../game/Input.js"></script>
        <script src="../game/Shield.js"></script>
        <script src="../game/Pole.js"></script>
        <script src="../game/Label.js"></script>
        <script src="../game/CollisionDetection.js"></script>
		<script src="../game/ColorGenerator.js"></script>
        
        <style type="text/css">
            body {
                margin: 0;
            }
        </style>
    </head>

    <body>

        <script type="text/javascript">

var game = new Game(loadContent, update, draw);

var pole;
var ball;
var shield;
var player;

function loadContent(){

    pole = new Pole(10);
    pole.setColor("blue");
    pole.setPosition(150, 150);

    ball = new Ball(10);
    ball.setColor("green");
    ball.getBody().setVelocity(5);
    //ball.getBody().setVelocityDirection(1.75 * Math.PI);
    //ball.setPosition(10, 10);

    shield = new Shield(pole);
    shield.getBody().immovable = true;

    

    player = new Player(-1)
    player.setPole(pole);
    player.setShield(shield);

    pole.setPlayer(player);

    Initialize();
}

//Updates the position of the items on the canvas and checks for collisions
function update(){
    updateGameDimensions();
    input.update();

    ball.update();
    pole.update();
    shield.update();
    player.update();

    if(handleCollision(ball, shield)){
        sendBallAngle();
    }

    // if(handleCollision(ball, pole)){
    //     pole.isHit();
    // }

    // ball.getBody().checkWorldBounds(game);

    parentDraw();
}

//Draws everything on the canvas
function draw(canvasContext){
    pole.draw(canvasContext);
    ball.draw(canvasContext);
    shield.draw(canvasContext);
    player.draw(canvasContext);
}

        
        </script>

    </body>
</html>
