<!doctype html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>Canvas test</title>

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
        <script src="js/socket.io.min.js"></script> 
        <script src="js/player.js"></script>

        <script src="../game/Base.js"></script>
        <script src="../game/Game.js"></script>
        <script src="../game/Sprite.js"></script>
        <script src="../game/Ball.js"></script>
        <script src="../game/Body.js"></script>
        <script src="../game/CircularBody.js"></script>
        <script src="../game/ShieldBody.js"></script>       
        <script src="../game/Input.js"></script>
        <script src="../game/Shield.js"></script>
        
        <style type="text/css">
            body {
                margin: 0;
            }
        </style>
    </head>
    <body>

    <script type="text/javascript">

var game = new Game(loadContent, update, draw);

var pole;
var ball;
var shield;

function loadContent(){

    pole = new Ball(10);
    pole.getBody().immovable = true;
    pole.setColor("blue");
    pole.setPosition(150, 150);

    ball = new Ball(10);
    ball.setColor("green");

    shield = new Shield(pole);
    shield.getBody().immovable = true;

    Initialize();

}

//Updates the position of the items on the canvas and checks for collisions
function update(){
    updateGameDimensions();
    Input.update();

    pole.update();
    shield.update();

    //Shield collision handling is not yet implemented
    if(shield.getBody().handleCollision(ball)){
        game.setBackgroundColor("red");
        socket.emit('shieldHit', 'SHIELDHIT!!')
    }else{
        game.setBackgroundColor("white");
    }

    parentDraw();
}

//Draws everything on the canvas
function draw(canvasContext){
    pole.draw(canvasContext);
    ball.draw(canvasContext);
    shield.draw(canvasContext);
}

        
    </script>

    </body>
</html>